{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sneha\\\\SlotSwapper\\\\frontend\\\\src\\\\pages\\\\SwapRequests.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SwapRequests() {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const token = localStorage.getItem(\"token\");\n  const headers = {\n    Authorization: `Bearer ${token}`\n  };\n\n  // ‚úÖ Fetch swap requests\n  const fetchSwapRequests = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/api/swap-requests\", {\n        headers\n      });\n      setRequests(res.data);\n    } catch (error) {\n      console.error(error);\n      setMessage(\"Failed to load swap requests.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchSwapRequests();\n  }, []);\n\n  // ‚úÖ Accept or Reject swap\n  const handleAction = async (requestId, action) => {\n    try {\n      const res = await axios.patch(`http://localhost:5000/api/swap-requests/${requestId}/${action}`, {}, {\n        headers\n      });\n      setMessage(res.data.message);\n      fetchSwapRequests(); // üîÑ Refresh requests\n\n      // üîî Notify dashboard to refresh its events\n      localStorage.setItem(\"dashboardNeedsRefresh\", \"true\");\n    } catch (error) {\n      console.error(error);\n      setMessage(\"Action failed!\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading swap requests...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: \"30px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uD83D\\uDD04 Swap Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 19\n    }, this), requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No swap requests available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyle: \"none\",\n        padding: 0\n      },\n      children: requests.map(req => {\n        var _req$requester, _req$receiverEvent, _req$requesterEvent;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            border: \"1px solid #ccc\",\n            borderRadius: \"10px\",\n            padding: \"10px\",\n            marginBottom: \"10px\",\n            width: \"400px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"From:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), \" \", ((_req$requester = req.requester) === null || _req$requester === void 0 ? void 0 : _req$requester.name) || \"Unknown\", \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 73\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Your Event:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), \" \", (_req$receiverEvent = req.receiverEvent) === null || _req$receiverEvent === void 0 ? void 0 : _req$receiverEvent.title, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 71\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Requested Swap With:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), \" \", (_req$requesterEvent = req.requesterEvent) === null || _req$requesterEvent === void 0 ? void 0 : _req$requesterEvent.title, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), \" \", req.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), req.status === \"PENDING\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAction(req._id, \"accept\"),\n              children: \"\\u2705 Accept\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAction(req._id, \"reject\"),\n              children: \"\\u274C Reject\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, req._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(SwapRequests, \"yKG1FpKTsLQcnthvB6q9XyymUVU=\");\n_c = SwapRequests;\nexport default SwapRequests;\nvar _c;\n$RefreshReg$(_c, \"SwapRequests\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","SwapRequests","_s","requests","setRequests","message","setMessage","loading","setLoading","token","localStorage","getItem","headers","Authorization","fetchSwapRequests","res","get","data","error","console","handleAction","requestId","action","patch","setItem","children","fileName","_jsxFileName","lineNumber","columnNumber","style","margin","color","length","listStyle","padding","map","req","_req$requester","_req$receiverEvent","_req$requesterEvent","border","borderRadius","marginBottom","width","requester","name","receiverEvent","title","requesterEvent","status","onClick","_id","_c","$RefreshReg$"],"sources":["C:/Users/sneha/SlotSwapper/frontend/src/pages/SwapRequests.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction SwapRequests() {\r\n  const [requests, setRequests] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const token = localStorage.getItem(\"token\");\r\n  const headers = { Authorization: `Bearer ${token}` };\r\n\r\n  // ‚úÖ Fetch swap requests\r\n  const fetchSwapRequests = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/swap-requests\", {\r\n        headers,\r\n      });\r\n      setRequests(res.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessage(\"Failed to load swap requests.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSwapRequests();\r\n  }, []);\r\n\r\n  // ‚úÖ Accept or Reject swap\r\n  const handleAction = async (requestId, action) => {\r\n    try {\r\n      const res = await axios.patch(\r\n        `http://localhost:5000/api/swap-requests/${requestId}/${action}`,\r\n        {},\r\n        { headers }\r\n      );\r\n\r\n      setMessage(res.data.message);\r\n      fetchSwapRequests(); // üîÑ Refresh requests\r\n\r\n      // üîî Notify dashboard to refresh its events\r\n      localStorage.setItem(\"dashboardNeedsRefresh\", \"true\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessage(\"Action failed!\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading swap requests...</p>;\r\n\r\n  return (\r\n    <div style={{ margin: \"30px\" }}>\r\n      <h3>üîÑ Swap Requests</h3>\r\n      {message && <p style={{ color: \"green\" }}>{message}</p>}\r\n\r\n      {requests.length === 0 ? (\r\n        <p>No swap requests available.</p>\r\n      ) : (\r\n        <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n          {requests.map((req) => (\r\n            <li\r\n              key={req._id}\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"10px\",\r\n                padding: \"10px\",\r\n                marginBottom: \"10px\",\r\n                width: \"400px\",\r\n              }}\r\n            >\r\n              <strong>From:</strong> {req.requester?.name || \"Unknown\"} <br />\r\n              <strong>Your Event:</strong> {req.receiverEvent?.title} <br />\r\n              <strong>Requested Swap With:</strong> {req.requesterEvent?.title}{\" \"}\r\n              <br />\r\n              <strong>Status:</strong> {req.status}\r\n              <br />\r\n              {req.status === \"PENDING\" && (\r\n                <>\r\n                  <button onClick={() => handleAction(req._id, \"accept\")}>\r\n                    ‚úÖ Accept\r\n                  </button>{\" \"}\r\n                  <button onClick={() => handleAction(req._id, \"reject\")}>\r\n                    ‚ùå Reject\r\n                  </button>\r\n                </>\r\n              )}\r\n              <hr />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SwapRequests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}